import{r as g,o as S,n as F,a as c,c as i,b as s,F as L,d as I,_ as V,e as A,w as O,v as M,f as x,t as l,p as P,g as $}from"./app.8cb31b58.js";import{a as j,V as d}from"./chunks/axios.f0c8b814.js";const z=r=>(P("data-v-ac7e28ec"),r=r(),$(),r),U=z(()=>s("div",{class:"container"},[s("h1",{style:{"font-size":"24pt","font-weight":"500","margin-bottom":"0.6em"}},"Πρόσφατο Επεισόδιο")],-1)),Y={class:"container"},q=["id"],G={class:"column"},J=["onUpdate:modelValue","onChange"],Q=["src"],W={class:"column"},X={class:"episode-title"},H={class:"episode-pubDate"},K=["onTimeupdate","onEnded"],R=["src"],Z={key:0,class:"episode-description"},ee={key:1,class:"episode-description"},te=["onClick"],ce=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"home","hero":{"name":"ξερωγώ; Podcast","text":null,"tagline":"Πραγματικά, αυτό το podcast είναι θάυμα που υπάρχει, νεα επεισόδια κάθε 1 με 2 εβδομάδες.","actions":[{"theme":"alt","text":"Όλα τα Επεισόδια","link":"/podcasts"},{"theme":"brand","text":"Open Spotify","link":"https://open.spotify.com/show/4Ejd4BXN2EY8gqGTQNDLvW?si=1c95d71826884500"}]}},"headers":[],"relativePath":"index.md"}'),se={name:"index.md"},oe=Object.assign(se,{setup(r){const u=g([]);g(0);const p=g(null);function f(t,a){const e=a.target.currentTime;console.log(e),d.set(t.guid+"time",e,"365d")}function v(t){return t.length>100?t.slice(0,100)+"...":t}function y(t){t.showFullDescription=!t.showFullDescription}function k(t){t.listened=!0,d.set(t.guid,!0,"365d")}function D(t){return d.get(t)}function w(t){console.log("Ended"),d.remove(t+"time"),this.markAsListened(t)}return S(async()=>{const a=(await j.get("/feed/index.xml")).data,_=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("item"),n=_[_.length-1],E=n.getElementsByTagName("title")[0].textContent,T=n.getElementsByTagName("description")[0].textContent,b=n.getElementsByTagName("pubDate")[0].textContent,N=n.getElementsByTagName("itunes:image")[0].getAttribute("href"),B=n.getElementsByTagName("enclosure")[0].getAttribute("url"),h=n.getElementsByTagName("guid")[0].textContent;u.value.push({title:E,description:T,pubDate:b,image:N,guid:h,audio:B,showFullDescription:!1,listened:D(h)}),await F(()=>{u.value.forEach(C=>{console.log(p.value[0].currentTime);let m=d.get(C.guid+"time");console.log(m),m&&(p.value[0].currentTime=m)})})}),(t,a)=>(c(),i("div",null,[U,s("div",Y,[(c(!0),i(L,null,I(u.value,e=>(c(),i("div",{class:A(["episode",{listened:!e.listened}]),id:e.guid,key:e.guid},[s("div",G,[O(s("input",{type:"checkbox","onUpdate:modelValue":o=>e.listened=o,onChange:o=>k(e)},null,40,J),[[M,e.listened]]),x(" Το χω ακούσει "),s("img",{class:"cover-image",src:e.image,alt:"Episode cover"},null,8,Q)]),s("div",W,[s("h2",X,l(e.title),1),s("p",H,l(e.pubDate),1),s("audio",{ref_for:!0,ref_key:"audioel",ref:p,controls:"",onTimeupdate:o=>f(e,o),onEnded:o=>w(e)},[s("source",{src:e.audio,type:"audio/mpeg"},null,8,R),x(" Your browser does not support the audio element. ")],40,K),e.showFullDescription?(c(),i("p",Z,l(e.description),1)):(c(),i("p",ee,l(v(e.description)),1)),s("button",{onClick:o=>y(e),class:"show-more-button"},l(e.showFullDescription?"Show less":"Show more"),9,te)])],10,q))),128))])]))}}),ie=V(oe,[["__scopeId","data-v-ac7e28ec"]]);export{ce as __pageData,ie as default};
