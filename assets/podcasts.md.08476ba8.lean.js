import{r as m,o as N,n as S,a as c,c as d,b as s,F,d as L,_ as I,e as V,w as A,v as M,f as g,t as l,p as O,g as $}from"./app.8cb31b58.js";import{a as P,V as r}from"./chunks/axios.f0c8b814.js";const U=u=>(O("data-v-d913fba3"),u=u(),$(),u),j=U(()=>s("h2",{id:"επεισοδια",tabindex:"-1"},[g("Επεισόδια "),s("a",{class:"header-anchor",href:"#επεισοδια","aria-hidden":"true"},"#")],-1)),z={class:"container"},J=["id"],Y=["onUpdate:modelValue","onChange"],q=["src"],G={class:"episode-title"},H={class:"episode-pubDate"},K=["id","onTimeupdate","onEnded"],Q=["src"],R={key:0,class:"episode-description"},W={key:1,class:"episode-description"},X=["onClick"],oe=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"Επεισόδια","slug":"επεισοδια","link":"#επεισοδια","children":[]}],"relativePath":"podcasts.md"}'),Z={name:"podcasts.md"},ee=Object.assign(Z,{setup(u){const h=m([]);m(0);const _=m([]);function v(t){return t.length>100?t.slice(0,100)+"...":t}function b(t){t.showFullDescription=!t.showFullDescription}function D(t){t.listened=!0,r.set(t.guid,!0,"365d")}function k(t){return r.get(t)}function y(t,a){const e=a.target.currentTime;r.set(t.guid+"time",e,"365d")}function w(t){r.remove(t+"time"),this.markAsListened(t)}return N(async()=>{const a=(await P.get("/feed/index.xml")).data,f=new DOMParser().parseFromString(a,"text/xml").getElementsByTagName("item");for(let i=f.length-1;i>=0;i--){const o=f[i],p=o.getElementsByTagName("title")[0].textContent,T=o.getElementsByTagName("description")[0].textContent,E=o.getElementsByTagName("pubDate")[0].textContent,C=o.getElementsByTagName("itunes:image")[0].getAttribute("href"),B=o.getElementsByTagName("enclosure")[0].getAttribute("url"),x=o.getElementsByTagName("guid")[0].textContent;h.value.push({title:p,description:T,pubDate:E,image:C,guid:x,audio:B,showFullDescription:!1,listened:k(x)})}await S(()=>{_.value.map((i,o)=>{let p=r.get(i.id);p&&(_.value[o].currentTime=p)})})}),(t,a)=>(c(),d("div",null,[j,s("div",z,[(c(!0),d(F,null,L(h.value,e=>(c(),d("div",null,[s("div",{id:e.guid,class:V(["episode",{listened:!e.listened}])},[A(s("input",{type:"checkbox","onUpdate:modelValue":n=>e.listened=n,onChange:n=>D(e)},null,40,Y),[[M,e.listened]]),g(" Το χω ακούσει "),s("img",{class:"cover-image",src:e.image,alt:"Episode cover"},null,8,q),s("h2",G,l(e.title),1),s("p",H,l(e.pubDate),1),s("audio",{ref_for:!0,ref_key:"audioels",ref:_,id:e.guid+"time",controls:"",onTimeupdate:n=>y(e,n),onEnded:n=>w(e)},[s("source",{src:e.audio,type:"audio/mpeg"},null,8,Q),g(" Your browser does not support the audio element. ")],40,K),e.showFullDescription?(c(),d("p",R,l(e.description),1)):(c(),d("p",W,l(v(e.description)),1)),s("button",{onClick:n=>b(e),class:"show-more-button"},l(e.showFullDescription?"Show less":"Show more"),9,X)],10,J)]))),256))])]))}}),ne=I(ee,[["__scopeId","data-v-d913fba3"]]);export{oe as __pageData,ne as default};
